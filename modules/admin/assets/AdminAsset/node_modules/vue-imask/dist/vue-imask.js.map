{"version":3,"file":"vue-imask.js","sources":["../src/imask.component.js","../src/imask.directive.js"],"sourcesContent":["import IMask from 'imask';\r\n\r\n\r\nexport\r\nconst IMaskComponent = {\r\n  name: 'imask-input',\r\n  model: {\r\n    prop: 'value',\r\n    event: 'accept'\r\n  },\r\n\r\n  render (createElement) {\r\n    return createElement('input');\r\n  },\r\n\r\n  mounted () {\r\n    this.maskRef = new IMask(this.$el, this.maskOptions)\r\n      .on('accept', this._onAccept.bind(this))\r\n      .on('complete', this._onComplete.bind(this));\r\n    this._updateValue();\r\n  },\r\n\r\n  destroyed () {\r\n    this.maskRef.destroy();\r\n    delete this.maskRef;\r\n  },\r\n\r\n  computed: {\r\n    maskOptions () {\r\n      return this._extractOptionsFromProps(this.$props);\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    '$props': {\r\n      handler () {\r\n        this.maskRef.updateOptions(this.maskOptions);\r\n        this._updateValue();\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    _extractOptionsFromProps (props) {\r\n      props = {...props};\r\n\r\n      // keep only defined props\r\n      Object.keys(props)\r\n        .filter(prop => props[prop] === undefined)\r\n        .forEach(undefinedProp => {\r\n          delete props[undefinedProp];\r\n        });\r\n\r\n      delete props.value;\r\n      delete props.unmask;\r\n\r\n      return props;\r\n    },\r\n\r\n    _maskValue () {\r\n      return this.unmask ?\r\n        this.maskRef.unmaskedValue :\r\n        this.maskRef.value;\r\n    },\r\n\r\n    _updateValue () {\r\n      const value = this.value || '';\r\n      if (this.unmask) this.maskRef.unmaskedValue = value;\r\n      else this.maskRef.value = value;\r\n    },\r\n\r\n    _onAccept () {\r\n      this.$emit('accept', this._maskValue());\r\n    },\r\n\r\n    _onComplete () {\r\n      this.$emit('complete', this._maskValue());\r\n    }\r\n  },\r\n\r\n  props: {\r\n    // common\r\n    mask: {\r\n      required: true\r\n    },\r\n    value: String,\r\n    unmask: Boolean,\r\n    prepare: Function,\r\n    validate: Function,\r\n    commit: Function,\r\n\r\n    // pattern\r\n    placeholderChar: String,\r\n    lazy: Boolean,\r\n    definitions: Object,\r\n    groups: Object,\r\n\r\n    // date\r\n    pattern: String,\r\n    format: Function,\r\n    parse: Function,\r\n\r\n    // number\r\n    radix: String,\r\n    thousandsSeparator: String,\r\n    mapToRadix: Array,\r\n    scale: Number,\r\n    signed: Boolean,\r\n    normalizeZeros: Boolean,\r\n    padFractionalZeros: Boolean,\r\n\r\n    // dynamic\r\n    dispatch: Function\r\n  },\r\n}\r\n","import IMask from 'imask';\r\n\r\n\r\nexport\r\nconst IMaskDirective = {\r\n  name: 'imask',\r\n\r\n  bind (el, {value: options}) {\r\n    if (!options) return;\r\n\r\n    initMask(el, options);\r\n  },\r\n\r\n  update (el, {value: options}) {\r\n    if (options) {\r\n      if (el.maskRef) el.maskRef.updateOptions(options);\r\n      else initMask(el, options);\r\n    } else {\r\n      destroyMask(el);\r\n    }\r\n  },\r\n\r\n  unbind (el) {\r\n    destroyMask(el);\r\n  }\r\n};\r\n\r\n\r\nfunction fireEvent (el, eventName, data) {\r\n  var e = document.createEvent('CustomEvent');\r\n  e.initCustomEvent(eventName, true, true, data);\r\n  el.dispatchEvent(e);\r\n}\r\n\r\nfunction initMask (el, opts) {\r\n  el.maskRef = new IMask(el, opts)\r\n    .on('accept', () => {\r\n      fireEvent(el, 'accept', el.maskRef);\r\n    })\r\n    .on('complete', () => {\r\n      fireEvent(el, 'complete', el.maskRef);\r\n    });\r\n}\r\n\r\nfunction destroyMask (el) {\r\n  if (el.maskRef) {\r\n    el.maskRef.destroy();\r\n    delete el.maskRef;\r\n  }\r\n}\r\n"],"names":["IMaskComponent","createElement","maskRef","IMask","$el","maskOptions","on","_onAccept","bind","_onComplete","_updateValue","destroy","_extractOptionsFromProps","$props","updateOptions","props","keys","filter","prop","undefined","forEach","undefinedProp","value","unmask","unmaskedValue","$emit","_maskValue","String","Boolean","Function","Object","Array","Number","IMaskDirective","el","options","initMask","fireEvent","eventName","data","e","document","createEvent","initCustomEvent","dispatchEvent","opts","destroyMask"],"mappings":"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"}